<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than draw.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" style="background: transparent; background-color: transparent; color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1782px" height="1041px" viewBox="0 0 1782 1041" content="&lt;mxfile host=&quot;app.diagrams.net&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Safari/605.1.15&quot; version=&quot;29.5.2&quot;&gt;&#10;  &lt;diagram name=&quot;C4 Component Diagram - SBMAgent&quot; id=&quot;UjNbDzyG8EN9K0Ih44lb&quot;&gt;&#10;    &lt;mxGraphModel dx=&quot;1802&quot; dy=&quot;1032&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;827&quot; pageHeight=&quot;1169&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&#10;      &lt;root&gt;&#10;        &lt;mxCell id=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;1&quot; parent=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-1&quot; parent=&quot;1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;&quot; value=&quot;&amp;lt;b&amp;gt;C4 Диаграмма Компонентов (Level 3)&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;SBMAgent Multi-Agent System&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;50&quot; width=&quot;600&quot; x=&quot;900&quot; y=&quot;20&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-2&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F4FD;strokeColor=#438DD5;strokeWidth=2;dashed=1;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;&quot; value=&quot;&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;400&quot; width=&quot;520&quot; x=&quot;40&quot; y=&quot;100&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-3&quot; parent=&quot;1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#438DD5;&quot; value=&quot;&amp;lt;b&amp;gt;REST API&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Контейнер: FastAPI/Uvicorn]&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;40&quot; width=&quot;200&quot; x=&quot;50&quot; y=&quot;105&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-4&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;FastAPI Application&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: FastAPI]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Инициализация приложения,&amp;lt;br&amp;gt;CORS middleware,&amp;lt;br&amp;gt;монтирование статики&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;160&quot; x=&quot;60&quot; y=&quot;160&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-5&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;Chat Router&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: APIRouter]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Обработка /chat/completions,&amp;lt;br&amp;gt;/api/chat, /v1/chat/completions&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;160&quot; x=&quot;240&quot; y=&quot;160&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-6&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;Models Router&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: APIRouter]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Обработка /models,&amp;lt;br&amp;gt;/api/tags (Ollama API)&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;160&quot; x=&quot;380&quot; y=&quot;280&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-7&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;SSE Streamer&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: AsyncGenerator]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Потоковая передача&amp;lt;br&amp;gt;ответов через SSE&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;120&quot; x=&quot;240&quot; y=&quot;280&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-8&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;Chat Schemas&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Pydantic]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;ChatMessage,&amp;lt;br&amp;gt;ChatCompletionRequest,&amp;lt;br&amp;gt;ChatCompletionChunk&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;160&quot; x=&quot;60&quot; y=&quot;280&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-9&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;Message Utils&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Module]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;extract_user_message(),&amp;lt;br&amp;gt;extract_chat_history()&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;160&quot; x=&quot;60&quot; y=&quot;400&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-10&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-4&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-5&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-11&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-5&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-7&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-12&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-5&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-8&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-13&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-8&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-9&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-14&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-4&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-6&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-15&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F4FD;strokeColor=#1168BD;strokeWidth=2;dashed=1;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;&quot; value=&quot;&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;400&quot; width=&quot;560&quot; x=&quot;600&quot; y=&quot;100&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-16&quot; parent=&quot;1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#1168BD;&quot; value=&quot;&amp;lt;b&amp;gt;Supervisor Agent&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Контейнер: LangGraph]&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;40&quot; width=&quot;200&quot; x=&quot;610&quot; y=&quot;105&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-17&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#6BA3D6;strokeColor=#3A7BBD;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;create_supervisor_agent()&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Factory]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Инициализация агента&amp;lt;br&amp;gt;с инструментами и промптами&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;170&quot; x=&quot;620&quot; y=&quot;160&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-18&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#6BA3D6;strokeColor=#3A7BBD;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;CompiledStateGraph&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: LangGraph]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Граф состояний для&amp;lt;br&amp;gt;маршрутизации запросов&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;160&quot; x=&quot;810&quot; y=&quot;160&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-19&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#6BA3D6;strokeColor=#3A7BBD;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;Agent Node&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Function]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Обработка сообщений&amp;lt;br&amp;gt;и вызов LLM с tools&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;150&quot; x=&quot;990&quot; y=&quot;160&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-20&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#6BA3D6;strokeColor=#3A7BBD;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;Tool Router&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Conditional]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Выбор инструмента:&amp;lt;br&amp;gt;RAG / MCP / Diagram&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;150&quot; x=&quot;620&quot; y=&quot;280&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-21&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#6BA3D6;strokeColor=#3A7BBD;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;System Prompt&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Constant]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;SUPERVISOR_SYSTEM_PROMPT&amp;lt;br&amp;gt;для маршрутизации&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;160&quot; x=&quot;790&quot; y=&quot;280&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-22&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#6BA3D6;strokeColor=#3A7BBD;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;AgentState&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: TypedDict]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;messages: Annotated&amp;lt;br&amp;gt;с add_messages reducer&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;160&quot; x=&quot;970&quot; y=&quot;280&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-23&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#6BA3D6;strokeColor=#3A7BBD;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;Tool Node&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: ToolNode]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Исполнение вызовов&amp;lt;br&amp;gt;инструментов&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;150&quot; x=&quot;620&quot; y=&quot;400&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-24&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-17&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-18&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-25&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-18&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-19&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-26&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-17&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-20&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-27&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-17&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-21&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-28&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-19&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-22&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-29&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-20&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-23&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-30&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F4FD;strokeColor=#438DD5;strokeWidth=2;dashed=1;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;&quot; value=&quot;&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;400&quot; width=&quot;340&quot; x=&quot;1200&quot; y=&quot;100&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-31&quot; parent=&quot;1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#438DD5;&quot; value=&quot;&amp;lt;b&amp;gt;LLM Factory&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Контейнер: Python Module]&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;40&quot; width=&quot;200&quot; x=&quot;1210&quot; y=&quot;105&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-32&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;LLMFactory&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Factory Class]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Фабрика для создания&amp;lt;br&amp;gt;экземпляров LLM&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;150&quot; x=&quot;1220&quot; y=&quot;160&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-33&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;get_llm()&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Static Method]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Создание LLM по provider&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;140&quot; x=&quot;1380&quot; y=&quot;160&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-34&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;get_openrouter_llm()&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Adapter]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;ChatOpenAI для OpenRouter&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;150&quot; x=&quot;1220&quot; y=&quot;280&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-35&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;get_ollama_llm()&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Adapter]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;ChatOllama для Ollama&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;140&quot; x=&quot;1380&quot; y=&quot;280&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-36&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;LLMProvider&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Enum]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;OPENROUTER, OLLAMA&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;150&quot; x=&quot;1280&quot; y=&quot;390&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-37&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-32&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-33&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-38&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-33&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-34&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-39&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-33&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-35&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-40&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-32&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-36&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-41&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F4FD;strokeColor=#438DD5;strokeWidth=2;dashed=1;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;&quot; value=&quot;&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;380&quot; width=&quot;520&quot; x=&quot;40&quot; y=&quot;540&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-42&quot; parent=&quot;1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#438DD5;&quot; value=&quot;&amp;lt;b&amp;gt;RAG System&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Контейнер: LightRAG + Llama Index]&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;40&quot; width=&quot;250&quot; x=&quot;50&quot; y=&quot;545&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-43&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;RAGToolFactory&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Factory]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Создание RAG инструментов&amp;lt;br&amp;gt;по конфигурации&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;160&quot; x=&quot;60&quot; y=&quot;600&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-44&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;initialize_rag()&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Async Function]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Инициализация LightRAG&amp;lt;br&amp;gt;с хранилищами&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;160&quot; x=&quot;240&quot; y=&quot;600&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-45&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;ask_lightrag_async()&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Async Function]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Гибридный поиск&amp;lt;br&amp;gt;(local+global+hybrid)&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;160&quot; x=&quot;60&quot; y=&quot;720&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-46&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;QdrantVectorDBStorage&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Storage]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Векторное хранилище&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;150&quot; x=&quot;240&quot; y=&quot;720&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-47&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;Neo4JStorage&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Storage]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Граф сущностей&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;140&quot; x=&quot;400&quot; y=&quot;720&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-48&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;PGKVStorage&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Storage]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Key-Value хранилище&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;140&quot; x=&quot;400&quot; y=&quot;600&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-49&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;openrouter_complete()&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Function]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;LLM вызовы для RAG&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;80&quot; width=&quot;160&quot; x=&quot;60&quot; y=&quot;830&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-50&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-43&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-44&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-51&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-43&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-45&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-52&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-44&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-46&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-53&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-44&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-47&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-54&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-44&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-48&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-55&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-45&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-49&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-56&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F4FD;strokeColor=#438DD5;strokeWidth=2;dashed=1;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;&quot; value=&quot;&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;380&quot; width=&quot;340&quot; x=&quot;600&quot; y=&quot;540&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-57&quot; parent=&quot;1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#438DD5;&quot; value=&quot;&amp;lt;b&amp;gt;MCP Tool Wrapper&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Контейнер: LangChain Tools]&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;40&quot; width=&quot;220&quot; x=&quot;610&quot; y=&quot;545&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-58&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;MCPToolWrapper&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: BaseTool]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;LangChain-совместимая&amp;lt;br&amp;gt;обёртка для MCP tools&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;150&quot; x=&quot;620&quot; y=&quot;600&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-59&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;create_langchain_tools()&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Async Function]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Обнаружение и&amp;lt;br&amp;gt;оборачивание MCP tools&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;150&quot; x=&quot;780&quot; y=&quot;600&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-60&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;json_schema_to_pydantic()&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Function]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Конвертация JSON Schema&amp;lt;br&amp;gt;в Pydantic модели&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;160&quot; x=&quot;620&quot; y=&quot;720&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-61&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;_arun()&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Method]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Async исполнение&amp;lt;br&amp;gt;через fastmcp.Client&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;140&quot; x=&quot;790&quot; y=&quot;720&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-62&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;call_tool()&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Function]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Нормализация аргументов&amp;lt;br&amp;gt;и вызов инструмента&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;70&quot; width=&quot;150&quot; x=&quot;700&quot; y=&quot;840&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-63&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-59&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-58&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-64&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-58&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-60&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-65&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-58&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-61&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-66&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-60&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-62&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-67&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F4FD;strokeColor=#438DD5;strokeWidth=2;dashed=1;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;&quot; value=&quot;&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;380&quot; width=&quot;280&quot; x=&quot;980&quot; y=&quot;540&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-68&quot; parent=&quot;1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#438DD5;&quot; value=&quot;&amp;lt;b&amp;gt;Diagram Agent&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Контейнер: LangGraph Agent]&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;40&quot; width=&quot;200&quot; x=&quot;990&quot; y=&quot;545&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-69&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;create_c4_diagram()&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Tool]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Главный tool для&amp;lt;br&amp;gt;создания C4 диаграмм&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;140&quot; x=&quot;1000&quot; y=&quot;600&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-70&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;generate_c4_agent()&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Function]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Полный агент с&amp;lt;br&amp;gt;генерацией и рендером&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;140&quot; x=&quot;1000&quot; y=&quot;720&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-71&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;generate_uml()&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Tool]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Рендеринг PlantUML&amp;lt;br&amp;gt;в PNG&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;100&quot; x=&quot;1150&quot; y=&quot;600&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-72&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;generate_uml_text_plan()&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Tool]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Генерация PlantUML&amp;lt;br&amp;gt;кода из текста&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;100&quot; x=&quot;1150&quot; y=&quot;720&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-73&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;C4DiagramPlan/Response&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Pydantic]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Схемы для валидации&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;70&quot; width=&quot;150&quot; x=&quot;1050&quot; y=&quot;840&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-74&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-69&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-70&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-75&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-70&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-71&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-76&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-70&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-72&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-77&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-70&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-73&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-78&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F4FD;strokeColor=#438DD5;strokeWidth=2;dashed=1;verticalAlign=top;align=left;spacingLeft=10;spacingTop=5;&quot; value=&quot;&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;380&quot; width=&quot;280&quot; x=&quot;1300&quot; y=&quot;540&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-79&quot; parent=&quot;1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#438DD5;&quot; value=&quot;&amp;lt;b&amp;gt;Config Manager&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Контейнер: Pydantic Settings]&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;40&quot; width=&quot;200&quot; x=&quot;1310&quot; y=&quot;545&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-80&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;Config&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: MainSettings]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Главный агрегатор&amp;lt;br&amp;gt;всех настроек&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;100&quot; width=&quot;140&quot; x=&quot;1380&quot; y=&quot;600&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-81&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;LLMConfig&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Settings]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;api_key, base_url,&amp;lt;br&amp;gt;chat_model, provider&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;120&quot; x=&quot;1320&quot; y=&quot;720&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-82&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;DBConfig&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Settings]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;qdrant_url, postgres_*,&amp;lt;br&amp;gt;neo4j_*&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;120&quot; x=&quot;1450&quot; y=&quot;720&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-83&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;ServerConfig&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Settings]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;external_url,&amp;lt;br&amp;gt;plant_uml_url&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;120&quot; x=&quot;1320&quot; y=&quot;820&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-84&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;fontColor=#000000;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;LoggingConfig&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Компонент: Settings]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;level, file_path,&amp;lt;br&amp;gt;console_enabled&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;120&quot; x=&quot;1450&quot; y=&quot;820&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-85&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-80&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-81&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-86&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-80&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-82&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-87&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-81&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-83&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-88&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-82&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-84&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-89&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#666666;fontColor=#ffffff;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;OpenRouter&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Внешняя система]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;LLM API Provider&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;140&quot; x=&quot;1620&quot; y=&quot;120&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-90&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#666666;fontColor=#ffffff;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;Ollama&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Внешняя система]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Локальные LLM&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;140&quot; x=&quot;1620&quot; y=&quot;230&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-91&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#666666;fontColor=#ffffff;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;Qdrant&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Внешняя система]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Vector Database&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;130&quot; x=&quot;40&quot; y=&quot;960&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-92&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#666666;fontColor=#ffffff;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;Neo4j&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Внешняя система]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Graph Database&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;130&quot; x=&quot;190&quot; y=&quot;960&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-93&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#666666;fontColor=#ffffff;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;PostgreSQL&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Внешняя система]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Relational DB&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;130&quot; x=&quot;340&quot; y=&quot;960&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-94&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#666666;fontColor=#ffffff;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;MCP Server&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Внешняя система]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Внешние инструменты&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;140&quot; x=&quot;620&quot; y=&quot;960&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-95&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#666666;fontColor=#ffffff;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;PlantUML Server&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Внешняя система]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Рендеринг диаграмм&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;150&quot; x=&quot;1000&quot; y=&quot;960&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-96&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#666666;fontColor=#ffffff;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;.env File&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Внешняя система]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;Переменные окружения&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;90&quot; width=&quot;150&quot; x=&quot;1400&quot; y=&quot;960&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-97&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#08427B;strokeColor=#052E56;fontColor=#ffffff;verticalAlign=top;align=center;&quot; value=&quot;&amp;lt;b&amp;gt;Клиент&amp;lt;/b&amp;gt;&amp;lt;br&amp;gt;[Open WebUI / HTTP Client]&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;HTTP/JSON запросы&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;70&quot; width=&quot;180&quot; x=&quot;40&quot; y=&quot;10&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-98&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-97&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#1168BD;strokeWidth=2;dashed=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-4&quot; value=&quot;HTTP/JSON&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-99&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-5&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#1168BD;strokeWidth=2;dashed=0;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-17&quot; value=&quot;invoke()&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-100&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-19&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#1168BD;strokeWidth=2;dashed=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-32&quot; value=&quot;get_llm()&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-101&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-34&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;dashed=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-89&quot; value=&quot;HTTPS/JSON&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-102&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-35&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;dashed=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-90&quot; value=&quot;HTTP&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-103&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-23&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#1168BD;strokeWidth=2;dashed=0;exitX=0;exitY=0.75;exitDx=0;exitDy=0;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-43&quot; value=&quot;ask_lightrag()&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;580&quot; y=&quot;467&quot; /&gt;&#10;              &lt;mxPoint x=&quot;580&quot; y=&quot;520&quot; /&gt;&#10;              &lt;mxPoint x=&quot;140&quot; y=&quot;520&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-104&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-23&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#1168BD;strokeWidth=2;dashed=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-58&quot; value=&quot;call_mcp_tool()&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-105&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-23&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#1168BD;strokeWidth=2;dashed=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-69&quot; value=&quot;create_c4_diagram()&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;960&quot; y=&quot;467&quot; /&gt;&#10;              &lt;mxPoint x=&quot;960&quot; y=&quot;520&quot; /&gt;&#10;              &lt;mxPoint x=&quot;1070&quot; y=&quot;520&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-106&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-46&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;dashed=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-91&quot; value=&quot;gRPC&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-107&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-47&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;dashed=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-92&quot; value=&quot;Bolt&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-108&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-48&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;dashed=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-93&quot; value=&quot;asyncpg&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-109&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-61&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;dashed=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-94&quot; value=&quot;MCP Protocol&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-110&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-71&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;dashed=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-95&quot; value=&quot;HTTP/PNG&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-111&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-80&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;dashed=1;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-96&quot; value=&quot;load()&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-112&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;q6_uw2fDuNxOSaYql00m-80&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#999999;strokeWidth=1;dashed=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;&quot; target=&quot;q6_uw2fDuNxOSaYql00m-32&quot; value=&quot;&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;1280&quot; y=&quot;650&quot; /&gt;&#10;              &lt;mxPoint x=&quot;1280&quot; y=&quot;210&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-113&quot; parent=&quot;1&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#666666;strokeWidth=1;&quot; value=&quot;&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;200&quot; width=&quot;200&quot; x=&quot;1620&quot; y=&quot;380&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-114&quot; parent=&quot;1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;&quot; value=&quot;&amp;lt;b&amp;gt;Легенда&amp;lt;/b&amp;gt;&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;20&quot; width=&quot;200&quot; x=&quot;1620&quot; y=&quot;385&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-115&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#08427B;strokeColor=#052E56;fontColor=#ffffff;&quot; value=&quot;&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;20&quot; width=&quot;30&quot; x=&quot;1630&quot; y=&quot;410&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-116&quot; parent=&quot;1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;&quot; value=&quot;Пользователь&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;20&quot; width=&quot;140&quot; x=&quot;1670&quot; y=&quot;410&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-117&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F4FD;strokeColor=#438DD5;strokeWidth=2;dashed=1;&quot; value=&quot;&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;20&quot; width=&quot;30&quot; x=&quot;1630&quot; y=&quot;440&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-118&quot; parent=&quot;1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;&quot; value=&quot;Контейнер (граница)&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;20&quot; width=&quot;140&quot; x=&quot;1670&quot; y=&quot;440&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-119&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#85BBF0;strokeColor=#5D8AC2;&quot; value=&quot;&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;20&quot; width=&quot;30&quot; x=&quot;1630&quot; y=&quot;470&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-120&quot; parent=&quot;1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;&quot; value=&quot;Компонент&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;20&quot; width=&quot;140&quot; x=&quot;1670&quot; y=&quot;470&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-121&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#6BA3D6;strokeColor=#3A7BBD;&quot; value=&quot;&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;20&quot; width=&quot;30&quot; x=&quot;1630&quot; y=&quot;500&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-122&quot; parent=&quot;1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;&quot; value=&quot;Главный компонент&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;20&quot; width=&quot;140&quot; x=&quot;1670&quot; y=&quot;500&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-123&quot; parent=&quot;1&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#999999;strokeColor=#666666;&quot; value=&quot;&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;20&quot; width=&quot;30&quot; x=&quot;1630&quot; y=&quot;530&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-124&quot; parent=&quot;1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;&quot; value=&quot;Внешняя система&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;20&quot; width=&quot;140&quot; x=&quot;1670&quot; y=&quot;530&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-125&quot; edge=&quot;1&quot; parent=&quot;1&quot; style=&quot;endArrow=classic;html=1;rounded=0;strokeColor=#1168BD;strokeWidth=2;&quot; value=&quot;&quot;&gt;&#10;          &lt;mxGeometry height=&quot;50&quot; relative=&quot;1&quot; width=&quot;50&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;1630&quot; y=&quot;565&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;1660&quot; y=&quot;565&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;q6_uw2fDuNxOSaYql00m-126&quot; parent=&quot;1&quot; style=&quot;text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;&quot; value=&quot;Внутренний вызов&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;20&quot; width=&quot;140&quot; x=&quot;1670&quot; y=&quot;555&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;      &lt;/root&gt;&#10;    &lt;/mxGraphModel&gt;&#10;  &lt;/diagram&gt;&#10;&lt;/mxfile&gt;&#10;" resource="https://app.diagrams.net/?src=about#Hpavel-collab%2FAgentic-system-images%2Fmain%2FC4ProjectComponentDiagram.drawio.svg#%7B%22pageId%22%3A%22UjNbDzyG8EN9K0Ih44lb%22%7D"><defs/><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="q6_uw2fDuNxOSaYql00m-1"><g transform="translate(0.5,0.5)"><rect x="860" y="10" width="600" height="50" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 598px; height: 1px; padding-top: 35px; margin-left: 861px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>C4 Диаграмма Компонентов (Level 3)</b><br />SBMAgent Multi-Agent System</div></div></div></foreignObject><text x="1160" y="41" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="20px" text-anchor="middle">C4 Диаграмма Компонентов (Level 3)...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-2"><g transform="translate(0.5,0.5)"><rect x="0" y="90" width="520" height="400" rx="60" ry="60" fill="#e8f4fd" stroke="#438dd5" stroke-width="2" stroke-dasharray="6 6" pointer-events="all" style="fill: light-dark(rgb(232, 244, 253), rgb(20, 31, 38)); stroke: light-dark(rgb(67, 141, 213), rgb(70, 134, 196));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-3"><g transform="translate(0.5,0.5)"><rect x="10" y="95" width="200" height="40" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 102px; margin-left: 12px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #438DD5; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#438DD5, #4686c4); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>REST API</b><br />[Контейнер: FastAPI/Uvicorn]</div></div></div></foreignObject><text x="12" y="114" fill="#438DD5" font-family="Helvetica" font-size="12px">REST API...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-4"><g transform="translate(0.5,0.5)"><rect x="20" y="150" width="160" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 157px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>FastAPI Application</b><br />[Компонент: FastAPI]<br /><br />Инициализация приложения,<br />CORS middleware,<br />монтирование статики</div></div></div></foreignObject><text x="100" y="169" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">FastAPI Application...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-5"><g transform="translate(0.5,0.5)"><rect x="200" y="150" width="160" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 157px; margin-left: 201px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Chat Router</b><br />[Компонент: APIRouter]<br /><br />Обработка /chat/completions,<br />/api/chat, /v1/chat/completions</div></div></div></foreignObject><text x="280" y="169" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Chat Router...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-6"><g transform="translate(0.5,0.5)"><rect x="340" y="270" width="160" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 277px; margin-left: 341px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Models Router</b><br />[Компонент: APIRouter]<br /><br />Обработка /models,<br />/api/tags (Ollama API)</div></div></div></foreignObject><text x="420" y="289" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Models Router...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-7"><g transform="translate(0.5,0.5)"><rect x="200" y="270" width="120" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 277px; margin-left: 201px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>SSE Streamer</b><br />[Компонент: AsyncGenerator]<br /><br />Потоковая передача<br />ответов через SSE</div></div></div></foreignObject><text x="260" y="289" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">SSE Streamer...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-8"><g transform="translate(0.5,0.5)"><rect x="20" y="270" width="160" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 277px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Chat Schemas</b><br />[Компонент: Pydantic]<br /><br />ChatMessage,<br />ChatCompletionRequest,<br />ChatCompletionChunk</div></div></div></foreignObject><text x="100" y="289" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Chat Schemas...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-9"><g transform="translate(0.5,0.5)"><rect x="20" y="390" width="160" height="90" rx="13.5" ry="13.5" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 397px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Message Utils</b><br />[Компонент: Module]<br /><br />extract_user_message(),<br />extract_chat_history()</div></div></div></foreignObject><text x="100" y="409" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Message Utils...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-10"><g transform="translate(0.5,0.5)"><path d="M 180 200 L 200 200 L 180 200 L 193.63 200" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 198.88 200 L 191.88 203.5 L 193.63 200 L 191.88 196.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-11"><g transform="translate(0.5,0.5)"><path d="M 280 250 L 280 270 L 266.37 270" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 261.12 270 L 268.12 266.5 L 266.37 270 L 268.12 273.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-12"><g transform="translate(0.5,0.5)"><path d="M 200 200 L 100 200 L 100 263.63" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 100 268.88 L 96.5 261.88 L 100 263.63 L 103.5 261.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-13"><g transform="translate(0.5,0.5)"><path d="M 100 370 L 100 390 L 100 370 L 100 383.63" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 100 388.88 L 96.5 381.88 L 100 383.63 L 103.5 381.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-14"><g transform="translate(0.5,0.5)"><path d="M 180 200 L 420 200 L 420 263.63" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 420 268.88 L 416.5 261.88 L 420 263.63 L 423.5 261.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-15"><g transform="translate(0.5,0.5)"><rect x="560" y="90" width="560" height="400" rx="60" ry="60" fill="#e8f4fd" stroke="#1168bd" stroke-width="2" stroke-dasharray="6 6" pointer-events="all" style="fill: light-dark(rgb(232, 244, 253), rgb(20, 31, 38)); stroke: light-dark(rgb(17, 104, 189), rgb(94, 169, 242));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-16"><g transform="translate(0.5,0.5)"><rect x="570" y="95" width="200" height="40" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 102px; margin-left: 572px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #1168BD; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#1168BD, #5ea9f2); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Supervisor Agent</b><br />[Контейнер: LangGraph]</div></div></div></foreignObject><text x="572" y="114" fill="#1168BD" font-family="Helvetica" font-size="12px">Supervisor Agent...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-17"><g transform="translate(0.5,0.5)"><rect x="580" y="150" width="170" height="100" rx="15" ry="15" fill="#6ba3d6" stroke="#3a7bbd" pointer-events="all" style="fill: light-dark(rgb(107, 163, 214), rgb(63, 111, 155)); stroke: light-dark(rgb(58, 123, 189), rgb(91, 147, 203));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 157px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>create_supervisor_agent()</b><br />[Компонент: Factory]<br /><br />Инициализация агента<br />с инструментами и промптами</div></div></div></foreignObject><text x="665" y="169" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">create_supervisor_agent()...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-18"><g transform="translate(0.5,0.5)"><rect x="770" y="150" width="160" height="100" rx="15" ry="15" fill="#6ba3d6" stroke="#3a7bbd" pointer-events="all" style="fill: light-dark(rgb(107, 163, 214), rgb(63, 111, 155)); stroke: light-dark(rgb(58, 123, 189), rgb(91, 147, 203));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 157px; margin-left: 771px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>CompiledStateGraph</b><br />[Компонент: LangGraph]<br /><br />Граф состояний для<br />маршрутизации запросов</div></div></div></foreignObject><text x="850" y="169" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">CompiledStateGraph...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-19"><g transform="translate(0.5,0.5)"><rect x="950" y="150" width="150" height="100" rx="15" ry="15" fill="#6ba3d6" stroke="#3a7bbd" pointer-events="all" style="fill: light-dark(rgb(107, 163, 214), rgb(63, 111, 155)); stroke: light-dark(rgb(58, 123, 189), rgb(91, 147, 203));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 157px; margin-left: 951px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Agent Node</b><br />[Компонент: Function]<br /><br />Обработка сообщений<br />и вызов LLM с tools</div></div></div></foreignObject><text x="1025" y="169" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Agent Node...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-20"><g transform="translate(0.5,0.5)"><rect x="580" y="270" width="150" height="100" rx="15" ry="15" fill="#6ba3d6" stroke="#3a7bbd" pointer-events="all" style="fill: light-dark(rgb(107, 163, 214), rgb(63, 111, 155)); stroke: light-dark(rgb(58, 123, 189), rgb(91, 147, 203));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 277px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Tool Router</b><br />[Компонент: Conditional]<br /><br />Выбор инструмента:<br />RAG / MCP / Diagram</div></div></div></foreignObject><text x="655" y="289" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Tool Router...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-21"><g transform="translate(0.5,0.5)"><rect x="750" y="270" width="160" height="100" rx="15" ry="15" fill="#6ba3d6" stroke="#3a7bbd" pointer-events="all" style="fill: light-dark(rgb(107, 163, 214), rgb(63, 111, 155)); stroke: light-dark(rgb(58, 123, 189), rgb(91, 147, 203));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 277px; margin-left: 751px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>System Prompt</b><br />[Компонент: Constant]<br /><br />SUPERVISOR_SYSTEM_PROMPT<br />для маршрутизации</div></div></div></foreignObject><text x="830" y="289" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">System Prompt...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-22"><g transform="translate(0.5,0.5)"><rect x="930" y="270" width="160" height="100" rx="15" ry="15" fill="#6ba3d6" stroke="#3a7bbd" pointer-events="all" style="fill: light-dark(rgb(107, 163, 214), rgb(63, 111, 155)); stroke: light-dark(rgb(58, 123, 189), rgb(91, 147, 203));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 277px; margin-left: 931px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>AgentState</b><br />[Компонент: TypedDict]<br /><br />messages: Annotated<br />с add_messages reducer</div></div></div></foreignObject><text x="1010" y="289" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">AgentState...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-23"><g transform="translate(0.5,0.5)"><rect x="580" y="390" width="150" height="90" rx="13.5" ry="13.5" fill="#6ba3d6" stroke="#3a7bbd" pointer-events="all" style="fill: light-dark(rgb(107, 163, 214), rgb(63, 111, 155)); stroke: light-dark(rgb(58, 123, 189), rgb(91, 147, 203));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 397px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Tool Node</b><br />[Компонент: ToolNode]<br /><br />Исполнение вызовов<br />инструментов</div></div></div></foreignObject><text x="655" y="409" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Tool Node...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-24"><g transform="translate(0.5,0.5)"><path d="M 750 200 L 770 200 L 750 200 L 763.63 200" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 768.88 200 L 761.88 203.5 L 763.63 200 L 761.88 196.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-25"><g transform="translate(0.5,0.5)"><path d="M 930 200 L 950 200 L 930 200 L 943.63 200" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 948.88 200 L 941.88 203.5 L 943.63 200 L 941.88 196.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-26"><g transform="translate(0.5,0.5)"><path d="M 665 250 L 665 270 L 661.37 270" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 656.12 270 L 663.12 266.5 L 661.37 270 L 663.12 273.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-27"><g transform="translate(0.5,0.5)"><path d="M 665 250 L 665 270 L 770 270 L 770 250 L 830 250 L 830 263.63" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 830 268.88 L 826.5 261.88 L 830 263.63 L 833.5 261.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-28"><g transform="translate(0.5,0.5)"><path d="M 1025 250 L 1025 270 L 1016.37 270" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1011.12 270 L 1018.12 266.5 L 1016.37 270 L 1018.12 273.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-29"><g transform="translate(0.5,0.5)"><path d="M 655 370 L 655 390 L 655 370 L 655 383.63" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 655 388.88 L 651.5 381.88 L 655 383.63 L 658.5 381.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-30"><g transform="translate(0.5,0.5)"><rect x="1160" y="90" width="340" height="400" rx="51" ry="51" fill="#e8f4fd" stroke="#438dd5" stroke-width="2" stroke-dasharray="6 6" pointer-events="all" style="fill: light-dark(rgb(232, 244, 253), rgb(20, 31, 38)); stroke: light-dark(rgb(67, 141, 213), rgb(70, 134, 196));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-31"><g transform="translate(0.5,0.5)"><rect x="1170" y="95" width="200" height="40" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 102px; margin-left: 1172px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #438DD5; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#438DD5, #4686c4); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>LLM Factory</b><br />[Контейнер: Python Module]</div></div></div></foreignObject><text x="1172" y="114" fill="#438DD5" font-family="Helvetica" font-size="12px">LLM Factory...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-32"><g transform="translate(0.5,0.5)"><rect x="1180" y="150" width="150" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 157px; margin-left: 1181px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>LLMFactory</b><br />[Компонент: Factory Class]<br /><br />Фабрика для создания<br />экземпляров LLM</div></div></div></foreignObject><text x="1255" y="169" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LLMFactory...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-33"><g transform="translate(0.5,0.5)"><rect x="1340" y="150" width="140" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 157px; margin-left: 1341px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>get_llm()</b><br />[Компонент: Static Method]<br /><br />Создание LLM по provider</div></div></div></foreignObject><text x="1410" y="169" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">get_llm()...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-34"><g transform="translate(0.5,0.5)"><rect x="1180" y="270" width="150" height="90" rx="13.5" ry="13.5" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 277px; margin-left: 1181px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>get_openrouter_llm()</b><br />[Компонент: Adapter]<br /><br />ChatOpenAI для OpenRouter</div></div></div></foreignObject><text x="1255" y="289" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">get_openrouter_llm()...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-35"><g transform="translate(0.5,0.5)"><rect x="1340" y="270" width="140" height="90" rx="13.5" ry="13.5" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 277px; margin-left: 1341px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>get_ollama_llm()</b><br />[Компонент: Adapter]<br /><br />ChatOllama для Ollama</div></div></div></foreignObject><text x="1410" y="289" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">get_ollama_llm()...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-36"><g transform="translate(0.5,0.5)"><rect x="1240" y="380" width="150" height="90" rx="13.5" ry="13.5" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 387px; margin-left: 1241px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>LLMProvider</b><br />[Компонент: Enum]<br /><br />OPENROUTER, OLLAMA</div></div></div></foreignObject><text x="1315" y="399" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LLMProvider...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-37"><g transform="translate(0.5,0.5)"><path d="M 1330 200 L 1350 200 L 1320 200 L 1333.63 200" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1338.88 200 L 1331.88 203.5 L 1333.63 200 L 1331.88 196.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-38"><g transform="translate(0.5,0.5)"><path d="M 1340 200 L 1255 200 L 1255 263.63" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1255 268.88 L 1251.5 261.88 L 1255 263.63 L 1258.5 261.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-39"><g transform="translate(0.5,0.5)"><path d="M 1410 250 L 1410 270 L 1410 250 L 1410 263.63" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1410 268.88 L 1406.5 261.88 L 1410 263.63 L 1413.5 261.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-40"><g transform="translate(0.5,0.5)"><path d="M 1255 250 L 1255 315 L 1315 315 L 1315 373.63" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1315 378.88 L 1311.5 371.88 L 1315 373.63 L 1318.5 371.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-41"><g transform="translate(0.5,0.5)"><rect x="0" y="530" width="520" height="380" rx="57" ry="57" fill="#e8f4fd" stroke="#438dd5" stroke-width="2" stroke-dasharray="6 6" pointer-events="all" style="fill: light-dark(rgb(232, 244, 253), rgb(20, 31, 38)); stroke: light-dark(rgb(67, 141, 213), rgb(70, 134, 196));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-42"><g transform="translate(0.5,0.5)"><rect x="10" y="535" width="250" height="40" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 248px; height: 1px; padding-top: 542px; margin-left: 12px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #438DD5; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#438DD5, #4686c4); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>RAG System</b><br />[Контейнер: LightRAG + Llama Index]</div></div></div></foreignObject><text x="12" y="554" fill="#438DD5" font-family="Helvetica" font-size="12px">RAG System...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-43"><g transform="translate(0.5,0.5)"><rect x="20" y="590" width="160" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 597px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>RAGToolFactory</b><br />[Компонент: Factory]<br /><br />Создание RAG инструментов<br />по конфигурации</div></div></div></foreignObject><text x="100" y="609" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">RAGToolFactory...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-44"><g transform="translate(0.5,0.5)"><rect x="200" y="590" width="160" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 597px; margin-left: 201px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>initialize_rag()</b><br />[Компонент: Async Function]<br /><br />Инициализация LightRAG<br />с хранилищами</div></div></div></foreignObject><text x="280" y="609" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">initialize_rag()...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-45"><g transform="translate(0.5,0.5)"><rect x="20" y="710" width="160" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 717px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>ask_lightrag_async()</b><br />[Компонент: Async Function]<br /><br />Гибридный поиск<br />(local+global+hybrid)</div></div></div></foreignObject><text x="100" y="729" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">ask_lightrag_async()...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-46"><g transform="translate(0.5,0.5)"><rect x="200" y="710" width="150" height="90" rx="13.5" ry="13.5" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 717px; margin-left: 201px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>QdrantVectorDBStorage</b><br />[Компонент: Storage]<br /><br />Векторное хранилище</div></div></div></foreignObject><text x="275" y="729" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">QdrantVectorDBStorage...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-47"><g transform="translate(0.5,0.5)"><rect x="360" y="710" width="140" height="90" rx="13.5" ry="13.5" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 717px; margin-left: 361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Neo4JStorage</b><br />[Компонент: Storage]<br /><br />Граф сущностей</div></div></div></foreignObject><text x="430" y="729" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Neo4JStorage...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-48"><g transform="translate(0.5,0.5)"><rect x="360" y="590" width="140" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 597px; margin-left: 361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>PGKVStorage</b><br />[Компонент: Storage]<br /><br />Key-Value хранилище</div></div></div></foreignObject><text x="430" y="609" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">PGKVStorage...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-49"><g transform="translate(0.5,0.5)"><rect x="20" y="820" width="160" height="80" rx="12" ry="12" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 827px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>openrouter_complete()</b><br />[Компонент: Function]<br /><br />LLM вызовы для RAG</div></div></div></foreignObject><text x="100" y="839" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">openrouter_complete()...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-50"><g transform="translate(0.5,0.5)"><path d="M 180 640 L 200 640 L 180 640 L 193.63 640" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 198.88 640 L 191.88 643.5 L 193.63 640 L 191.88 636.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-51"><g transform="translate(0.5,0.5)"><path d="M 100 690 L 100 710 L 100 690 L 100 703.63" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 100 708.88 L 96.5 701.88 L 100 703.63 L 103.5 701.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-52"><g transform="translate(0.5,0.5)"><path d="M 280 690 L 280 710 L 281.37 710" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 276.12 710 L 283.12 706.5 L 281.37 710 L 283.12 713.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-53"><g transform="translate(0.5,0.5)"><path d="M 280 690 L 280 710 L 380 710 L 380 690 L 430 690 L 430 703.63" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 430 708.88 L 426.5 701.88 L 430 703.63 L 433.5 701.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-54"><g transform="translate(0.5,0.5)"><path d="M 280 590 L 280 570 L 380 570 L 380 710 L 430 710 L 430 696.37" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 430 691.12 L 433.5 698.12 L 430 696.37 L 426.5 698.12 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-55"><g transform="translate(0.5,0.5)"><path d="M 100 810 L 100 830 L 100 800 L 100 813.63" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 100 818.88 L 96.5 811.88 L 100 813.63 L 103.5 811.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-56"><g transform="translate(0.5,0.5)"><rect x="560" y="530" width="340" height="380" rx="51" ry="51" fill="#e8f4fd" stroke="#438dd5" stroke-width="2" stroke-dasharray="6 6" pointer-events="all" style="fill: light-dark(rgb(232, 244, 253), rgb(20, 31, 38)); stroke: light-dark(rgb(67, 141, 213), rgb(70, 134, 196));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-57"><g transform="translate(0.5,0.5)"><rect x="570" y="535" width="220" height="40" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 218px; height: 1px; padding-top: 542px; margin-left: 572px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #438DD5; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#438DD5, #4686c4); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>MCP Tool Wrapper</b><br />[Контейнер: LangChain Tools]</div></div></div></foreignObject><text x="572" y="554" fill="#438DD5" font-family="Helvetica" font-size="12px">MCP Tool Wrapper...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-58"><g transform="translate(0.5,0.5)"><rect x="580" y="590" width="150" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 597px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>MCPToolWrapper</b><br />[Компонент: BaseTool]<br /><br />LangChain-совместимая<br />обёртка для MCP tools</div></div></div></foreignObject><text x="655" y="609" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">MCPToolWrapper...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-59"><g transform="translate(0.5,0.5)"><rect x="740" y="590" width="150" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 597px; margin-left: 741px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>create_langchain_tools()</b><br />[Компонент: Async Function]<br /><br />Обнаружение и<br />оборачивание MCP tools</div></div></div></foreignObject><text x="815" y="609" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">create_langchain_tools()...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-60"><g transform="translate(0.5,0.5)"><rect x="580" y="710" width="160" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 717px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>json_schema_to_pydantic()</b><br />[Компонент: Function]<br /><br />Конвертация JSON Schema<br />в Pydantic модели</div></div></div></foreignObject><text x="660" y="729" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">json_schema_to_pydantic()...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-61"><g transform="translate(0.5,0.5)"><rect x="750" y="710" width="140" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 717px; margin-left: 751px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>_arun()</b><br />[Компонент: Method]<br /><br />Async исполнение<br />через fastmcp.Client</div></div></div></foreignObject><text x="820" y="729" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">_arun()...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-62"><g transform="translate(0.5,0.5)"><rect x="660" y="830" width="150" height="70" rx="10.5" ry="10.5" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 837px; margin-left: 661px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>call_tool()</b><br />[Компонент: Function]<br /><br />Нормализация аргументов<br />и вызов инструмента</div></div></div></foreignObject><text x="735" y="849" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">call_tool()...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-63"><g transform="translate(0.5,0.5)"><path d="M 740 640 L 720 640 L 750 640 L 736.37 640" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 731.12 640 L 738.12 636.5 L 736.37 640 L 738.12 643.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-64"><g transform="translate(0.5,0.5)"><path d="M 655 690 L 655 710 L 653.63 710" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 658.88 710 L 651.88 713.5 L 653.63 710 L 651.88 706.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-65"><g transform="translate(0.5,0.5)"><path d="M 730 640 L 820 640 L 820 703.63" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 820 708.88 L 816.5 701.88 L 820 703.63 L 823.5 701.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-66"><g transform="translate(0.5,0.5)"><path d="M 660 810 L 660 830 L 728.63 830" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 733.88 830 L 726.88 833.5 L 728.63 830 L 726.88 826.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-67"><g transform="translate(0.5,0.5)"><rect x="940" y="530" width="280" height="380" rx="42" ry="42" fill="#e8f4fd" stroke="#438dd5" stroke-width="2" stroke-dasharray="6 6" pointer-events="all" style="fill: light-dark(rgb(232, 244, 253), rgb(20, 31, 38)); stroke: light-dark(rgb(67, 141, 213), rgb(70, 134, 196));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-68"><g transform="translate(0.5,0.5)"><rect x="950" y="535" width="200" height="40" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 542px; margin-left: 952px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #438DD5; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#438DD5, #4686c4); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Diagram Agent</b><br />[Контейнер: LangGraph Agent]</div></div></div></foreignObject><text x="952" y="554" fill="#438DD5" font-family="Helvetica" font-size="12px">Diagram Agent...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-69"><g transform="translate(0.5,0.5)"><rect x="960" y="590" width="140" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 597px; margin-left: 961px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>create_c4_diagram()</b><br />[Компонент: Tool]<br /><br />Главный tool для<br />создания C4 диаграмм</div></div></div></foreignObject><text x="1030" y="609" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">create_c4_diagram()...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-70"><g transform="translate(0.5,0.5)"><rect x="960" y="710" width="140" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 717px; margin-left: 961px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>generate_c4_agent()</b><br />[Компонент: Function]<br /><br />Полный агент с<br />генерацией и рендером</div></div></div></foreignObject><text x="1030" y="729" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">generate_c4_agent()...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-71"><g transform="translate(0.5,0.5)"><rect x="1110" y="590" width="100" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 597px; margin-left: 1111px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>generate_uml()</b><br />[Компонент: Tool]<br /><br />Рендеринг PlantUML<br />в PNG</div></div></div></foreignObject><text x="1160" y="609" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">generate_uml()...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-72"><g transform="translate(0.5,0.5)"><rect x="1110" y="710" width="100" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 717px; margin-left: 1111px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>generate_uml_text_plan()</b><br />[Компонент: Tool]<br /><br />Генерация PlantUML<br />кода из текста</div></div></div></foreignObject><text x="1160" y="729" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">generate_uml_tex...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-73"><g transform="translate(0.5,0.5)"><rect x="1010" y="830" width="150" height="70" rx="10.5" ry="10.5" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 837px; margin-left: 1011px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>C4DiagramPlan/Response</b><br />[Компонент: Pydantic]<br /><br />Схемы для валидации</div></div></div></foreignObject><text x="1085" y="849" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">C4DiagramPlan/Response...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-74"><g transform="translate(0.5,0.5)"><path d="M 1030 690 L 1030 710 L 1030 690 L 1030 703.63" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1030 708.88 L 1026.5 701.88 L 1030 703.63 L 1033.5 701.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-75"><g transform="translate(0.5,0.5)"><path d="M 1100 760 L 1160 760 L 1160 696.37" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1160 691.12 L 1163.5 698.12 L 1160 696.37 L 1156.5 698.12 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-76"><g transform="translate(0.5,0.5)"><path d="M 1100 760 L 1120 760 L 1090 760 L 1103.63 760" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1108.88 760 L 1101.88 763.5 L 1103.63 760 L 1101.88 756.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-77"><g transform="translate(0.5,0.5)"><path d="M 1030 810 L 1030 830 L 1078.63 830" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1083.88 830 L 1076.88 833.5 L 1078.63 830 L 1076.88 826.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-78"><g transform="translate(0.5,0.5)"><rect x="1260" y="530" width="280" height="380" rx="42" ry="42" fill="#e8f4fd" stroke="#438dd5" stroke-width="2" stroke-dasharray="6 6" pointer-events="all" style="fill: light-dark(rgb(232, 244, 253), rgb(20, 31, 38)); stroke: light-dark(rgb(67, 141, 213), rgb(70, 134, 196));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-79"><g transform="translate(0.5,0.5)"><rect x="1270" y="535" width="200" height="40" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 542px; margin-left: 1272px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #438DD5; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#438DD5, #4686c4); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Config Manager</b><br />[Контейнер: Pydantic Settings]</div></div></div></foreignObject><text x="1272" y="554" fill="#438DD5" font-family="Helvetica" font-size="12px">Config Manager...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-80"><g transform="translate(0.5,0.5)"><rect x="1340" y="590" width="140" height="100" rx="15" ry="15" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 597px; margin-left: 1341px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Config</b><br />[Компонент: MainSettings]<br /><br />Главный агрегатор<br />всех настроек</div></div></div></foreignObject><text x="1410" y="609" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Config...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-81"><g transform="translate(0.5,0.5)"><rect x="1280" y="710" width="120" height="90" rx="13.5" ry="13.5" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 717px; margin-left: 1281px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>LLMConfig</b><br />[Компонент: Settings]<br /><br />api_key, base_url,<br />chat_model, provider</div></div></div></foreignObject><text x="1340" y="729" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LLMConfig...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-82"><g transform="translate(0.5,0.5)"><rect x="1410" y="710" width="120" height="90" rx="13.5" ry="13.5" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 717px; margin-left: 1411px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>DBConfig</b><br />[Компонент: Settings]<br /><br />qdrant_url, postgres_*,<br />neo4j_*</div></div></div></foreignObject><text x="1470" y="729" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DBConfig...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-83"><g transform="translate(0.5,0.5)"><rect x="1280" y="810" width="120" height="90" rx="13.5" ry="13.5" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 817px; margin-left: 1281px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>ServerConfig</b><br />[Компонент: Settings]<br /><br />external_url,<br />plant_uml_url</div></div></div></foreignObject><text x="1340" y="829" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">ServerConfig...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-84"><g transform="translate(0.5,0.5)"><rect x="1410" y="810" width="120" height="90" rx="13.5" ry="13.5" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 817px; margin-left: 1411px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ededed); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>LoggingConfig</b><br />[Компонент: Settings]<br /><br />level, file_path,<br />console_enabled</div></div></div></foreignObject><text x="1470" y="829" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LoggingConfig...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-85"><g transform="translate(0.5,0.5)"><path d="M 1410 690 L 1410 710 L 1346.37 710" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1341.12 710 L 1348.12 706.5 L 1346.37 710 L 1348.12 713.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-86"><g transform="translate(0.5,0.5)"><path d="M 1410 690 L 1410 710 L 1463.63 710" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1468.88 710 L 1461.88 713.5 L 1463.63 710 L 1461.88 706.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-87"><g transform="translate(0.5,0.5)"><path d="M 1340 800 L 1340 820 L 1340 790 L 1340 803.63" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1340 808.88 L 1336.5 801.88 L 1340 803.63 L 1343.5 801.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-88"><g transform="translate(0.5,0.5)"><path d="M 1470 800 L 1470 820 L 1470 790 L 1470 803.63" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1470 808.88 L 1466.5 801.88 L 1470 803.63 L 1473.5 801.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-89"><g transform="translate(0.5,0.5)"><rect x="1580" y="110" width="140" height="90" rx="13.5" ry="13.5" fill="#999999" stroke="#666666" pointer-events="all" style="fill: light-dark(rgb(153, 153, 153), rgb(106, 106, 106)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 117px; margin-left: 1581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #ffffff; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#ffffff, #121212); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>OpenRouter</b><br />[Внешняя система]<br /><br />LLM API Provider</div></div></div></foreignObject><text x="1650" y="129" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">OpenRouter...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-90"><g transform="translate(0.5,0.5)"><rect x="1580" y="220" width="140" height="90" rx="13.5" ry="13.5" fill="#999999" stroke="#666666" pointer-events="all" style="fill: light-dark(rgb(153, 153, 153), rgb(106, 106, 106)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 227px; margin-left: 1581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #ffffff; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#ffffff, #121212); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Ollama</b><br />[Внешняя система]<br /><br />Локальные LLM</div></div></div></foreignObject><text x="1650" y="239" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">Ollama...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-91"><g transform="translate(0.5,0.5)"><rect x="0" y="950" width="130" height="90" rx="13.5" ry="13.5" fill="#999999" stroke="#666666" pointer-events="all" style="fill: light-dark(rgb(153, 153, 153), rgb(106, 106, 106)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 957px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #ffffff; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#ffffff, #121212); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Qdrant</b><br />[Внешняя система]<br /><br />Vector Database</div></div></div></foreignObject><text x="65" y="969" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">Qdrant...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-92"><g transform="translate(0.5,0.5)"><rect x="150" y="950" width="130" height="90" rx="13.5" ry="13.5" fill="#999999" stroke="#666666" pointer-events="all" style="fill: light-dark(rgb(153, 153, 153), rgb(106, 106, 106)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 957px; margin-left: 151px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #ffffff; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#ffffff, #121212); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Neo4j</b><br />[Внешняя система]<br /><br />Graph Database</div></div></div></foreignObject><text x="215" y="969" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">Neo4j...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-93"><g transform="translate(0.5,0.5)"><rect x="300" y="950" width="130" height="90" rx="13.5" ry="13.5" fill="#999999" stroke="#666666" pointer-events="all" style="fill: light-dark(rgb(153, 153, 153), rgb(106, 106, 106)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 957px; margin-left: 301px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #ffffff; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#ffffff, #121212); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>PostgreSQL</b><br />[Внешняя система]<br /><br />Relational DB</div></div></div></foreignObject><text x="365" y="969" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">PostgreSQL...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-94"><g transform="translate(0.5,0.5)"><rect x="580" y="950" width="140" height="90" rx="13.5" ry="13.5" fill="#999999" stroke="#666666" pointer-events="all" style="fill: light-dark(rgb(153, 153, 153), rgb(106, 106, 106)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 957px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #ffffff; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#ffffff, #121212); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>MCP Server</b><br />[Внешняя система]<br /><br />Внешние инструменты</div></div></div></foreignObject><text x="650" y="969" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">MCP Server...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-95"><g transform="translate(0.5,0.5)"><rect x="960" y="950" width="150" height="90" rx="13.5" ry="13.5" fill="#999999" stroke="#666666" pointer-events="all" style="fill: light-dark(rgb(153, 153, 153), rgb(106, 106, 106)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 957px; margin-left: 961px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #ffffff; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#ffffff, #121212); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>PlantUML Server</b><br />[Внешняя система]<br /><br />Рендеринг диаграмм</div></div></div></foreignObject><text x="1035" y="969" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">PlantUML Server...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-96"><g transform="translate(0.5,0.5)"><rect x="1360" y="950" width="150" height="90" rx="13.5" ry="13.5" fill="#999999" stroke="#666666" pointer-events="all" style="fill: light-dark(rgb(153, 153, 153), rgb(106, 106, 106)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 957px; margin-left: 1361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #ffffff; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#ffffff, #121212); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>.env File</b><br />[Внешняя система]<br /><br />Переменные окружения</div></div></div></foreignObject><text x="1435" y="969" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">.env File...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-97"><g transform="translate(0.5,0.5)"><rect x="0" y="0" width="180" height="70" rx="10.5" ry="10.5" fill="#08427b" stroke="#052e56" pointer-events="all" style="fill: light-dark(rgb(8, 66, 123), rgb(144, 194, 243)); stroke: light-dark(rgb(5, 46, 86), rgb(173, 208, 243));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 7px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #ffffff; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#ffffff, #121212); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Клиент</b><br />[Open WebUI / HTTP Client]<br /><br />HTTP/JSON запросы</div></div></div></foreignObject><text x="90" y="19" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">Клиент[Open WebUI / HTTP Client]...</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-98"><g transform="translate(0.5,0.5)"><path d="M 90 70 L 90 110 L 100 110 L 100 141.76" fill="none" stroke="#1168bd" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(17, 104, 189), rgb(94, 169, 242));"/><path d="M 100 147.76 L 96 139.76 L 100 141.76 L 104 139.76 Z" fill="#1168bd" stroke="#1168bd" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(17, 104, 189), rgb(94, 169, 242)); stroke: light-dark(rgb(17, 104, 189), rgb(94, 169, 242));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 110px; margin-left: 95px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; background-color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); white-space: nowrap; ">HTTP/JSON</div></div></div></foreignObject><text x="95" y="113" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="11px" text-anchor="middle">HTTP/JSON</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-99"><g transform="translate(0.5,0.5)"><path d="M 360 200 L 571.76 200" fill="none" stroke="#1168bd" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(17, 104, 189), rgb(94, 169, 242));"/><path d="M 577.76 200 L 569.76 204 L 571.76 200 L 569.76 196 Z" fill="#1168bd" stroke="#1168bd" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(17, 104, 189), rgb(94, 169, 242)); stroke: light-dark(rgb(17, 104, 189), rgb(94, 169, 242));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 200px; margin-left: 470px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; background-color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); white-space: nowrap; ">invoke()</div></div></div></foreignObject><text x="470" y="203" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="11px" text-anchor="middle">invoke()</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-100"><g transform="translate(0.5,0.5)"><path d="M 1100 200 L 1171.76 200" fill="none" stroke="#1168bd" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(17, 104, 189), rgb(94, 169, 242));"/><path d="M 1177.76 200 L 1169.76 204 L 1171.76 200 L 1169.76 196 Z" fill="#1168bd" stroke="#1168bd" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(17, 104, 189), rgb(94, 169, 242)); stroke: light-dark(rgb(17, 104, 189), rgb(94, 169, 242));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 200px; margin-left: 1140px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; background-color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); white-space: nowrap; ">get_llm()</div></div></div></foreignObject><text x="1140" y="203" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="11px" text-anchor="middle">get_llm()</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-101"><g transform="translate(0.5,0.5)"><path d="M 1330 315 L 1650 315 L 1650 206.37" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1650 201.12 L 1653.5 208.12 L 1650 206.37 L 1646.5 208.12 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 315px; margin-left: 1547px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; background-color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); white-space: nowrap; ">HTTPS/JSON</div></div></div></foreignObject><text x="1547" y="318" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="11px" text-anchor="middle">HTTPS/JSON</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-102"><g transform="translate(0.5,0.5)"><path d="M 1480 315 L 1530 315 L 1530 265 L 1573.63 265" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1578.88 265 L 1571.88 268.5 L 1573.63 265 L 1571.88 261.5 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 290px; margin-left: 1530px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; background-color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); white-space: nowrap; ">HTTP</div></div></div></foreignObject><text x="1530" y="293" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="11px" text-anchor="middle">HTTP</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-103"><g transform="translate(0.5,0.5)"><path d="M 580 457.5 L 540 457.5 L 540 510 L 100 510 L 100 581.76" fill="none" stroke="#1168bd" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(17, 104, 189), rgb(94, 169, 242));"/><path d="M 100 587.76 L 96 579.76 L 100 581.76 L 104 579.76 Z" fill="#1168bd" stroke="#1168bd" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(17, 104, 189), rgb(94, 169, 242)); stroke: light-dark(rgb(17, 104, 189), rgb(94, 169, 242));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 510px; margin-left: 326px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; background-color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); white-space: nowrap; ">ask_lightrag()</div></div></div></foreignObject><text x="326" y="513" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="11px" text-anchor="middle">ask_lightrag()</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-104"><g transform="translate(0.5,0.5)"><path d="M 655 480 L 655 581.76" fill="none" stroke="#1168bd" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(17, 104, 189), rgb(94, 169, 242));"/><path d="M 655 587.76 L 651 579.76 L 655 581.76 L 659 579.76 Z" fill="#1168bd" stroke="#1168bd" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(17, 104, 189), rgb(94, 169, 242)); stroke: light-dark(rgb(17, 104, 189), rgb(94, 169, 242));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 535px; margin-left: 655px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; background-color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); white-space: nowrap; ">call_mcp_tool()</div></div></div></foreignObject><text x="655" y="538" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="11px" text-anchor="middle">call_mcp_tool()</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-105"><g transform="translate(0.5,0.5)"><path d="M 730 457.5 L 920 457.5 L 920 510 L 1030 510 L 1030 581.76" fill="none" stroke="#1168bd" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(17, 104, 189), rgb(94, 169, 242));"/><path d="M 1030 587.76 L 1026 579.76 L 1030 581.76 L 1034 579.76 Z" fill="#1168bd" stroke="#1168bd" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(17, 104, 189), rgb(94, 169, 242)); stroke: light-dark(rgb(17, 104, 189), rgb(94, 169, 242));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 484px; margin-left: 920px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; background-color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); white-space: nowrap; ">create_c4_diagram()</div></div></div></foreignObject><text x="920" y="487" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="11px" text-anchor="middle">create_c4_diagram()</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-106"><g transform="translate(0.5,0.5)"><path d="M 200 755 L 65 755 L 65 943.63" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 65 948.88 L 61.5 941.88 L 65 943.63 L 68.5 941.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 785px; margin-left: 65px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; background-color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); white-space: nowrap; ">gRPC</div></div></div></foreignObject><text x="65" y="788" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="11px" text-anchor="middle">gRPC</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-107"><g transform="translate(0.5,0.5)"><path d="M 360 755 L 215 755 L 215 943.63" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 215 948.88 L 211.5 941.88 L 215 943.63 L 218.5 941.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 780px; margin-left: 215px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; background-color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); white-space: nowrap; ">Bolt</div></div></div></foreignObject><text x="215" y="783" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="11px" text-anchor="middle">Bolt</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-108"><g transform="translate(0.5,0.5)"><path d="M 430 690 L 430 820 L 365 820 L 365 943.63" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 365 948.88 L 361.5 941.88 L 365 943.63 L 368.5 941.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 820px; margin-left: 397px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; background-color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); white-space: nowrap; ">asyncpg</div></div></div></foreignObject><text x="397" y="823" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="11px" text-anchor="middle">asyncpg</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-109"><g transform="translate(0.5,0.5)"><path d="M 750 760 L 650 760 L 650 943.63" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 650 948.88 L 646.5 941.88 L 650 943.63 L 653.5 941.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 805px; margin-left: 650px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; background-color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); white-space: nowrap; ">MCP Protocol</div></div></div></foreignObject><text x="650" y="808" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="11px" text-anchor="middle">MCP Protocol</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-110"><g transform="translate(0.5,0.5)"><path d="M 1160 690 L 1160 820 L 1035 820 L 1035 943.63" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1035 948.88 L 1031.5 941.88 L 1035 943.63 L 1038.5 941.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 820px; margin-left: 1097px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; background-color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); white-space: nowrap; ">HTTP/PNG</div></div></div></foreignObject><text x="1097" y="823" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="11px" text-anchor="middle">HTTP/PNG</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-111"><g transform="translate(0.5,0.5)"><path d="M 1410 690 L 1410 820 L 1435 820 L 1435 943.63" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke" style="stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/><path d="M 1435 948.88 L 1431.5 941.88 L 1435 943.63 L 1438.5 941.88 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(102, 102, 102), rgb(149, 149, 149)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 820px; margin-left: 1423px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; background-color: #ffffff; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); white-space: nowrap; ">load()</div></div></div></foreignObject><text x="1423" y="823" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="11px" text-anchor="middle">load()</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-112"><g transform="translate(0.5,0.5)"><path d="M 1340 640 L 1240 640 L 1240 256.37" fill="none" stroke="#999999" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke" style="stroke: light-dark(rgb(153, 153, 153), rgb(106, 106, 106));"/><path d="M 1240 251.12 L 1243.5 258.12 L 1240 256.37 L 1236.5 258.12 Z" fill="#999999" stroke="#999999" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(153, 153, 153), rgb(106, 106, 106)); stroke: light-dark(rgb(153, 153, 153), rgb(106, 106, 106));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-113"><g transform="translate(0.5,0.5)"><rect x="1580" y="370" width="200" height="200" fill="#f5f5f5" stroke="#666666" pointer-events="all" style="fill: light-dark(rgb(245, 245, 245), rgb(26, 26, 26)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-114"><g transform="translate(0.5,0.5)"><rect x="1580" y="375" width="200" height="20" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 385px; margin-left: 1581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><b>Легенда</b></div></div></div></foreignObject><text x="1680" y="389" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="12px" text-anchor="middle">Легенда</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-115"><g transform="translate(0.5,0.5)"><rect x="1590" y="400" width="30" height="20" rx="3" ry="3" fill="#08427b" stroke="#052e56" pointer-events="all" style="fill: light-dark(rgb(8, 66, 123), rgb(144, 194, 243)); stroke: light-dark(rgb(5, 46, 86), rgb(173, 208, 243));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-116"><g transform="translate(0.5,0.5)"><rect x="1630" y="400" width="140" height="20" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 410px; margin-left: 1632px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Пользователь</div></div></div></foreignObject><text x="1632" y="413" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="10px">Пользователь</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-117"><g transform="translate(0.5,0.5)"><rect x="1590" y="430" width="30" height="20" rx="3" ry="3" fill="#e8f4fd" stroke="#438dd5" stroke-width="2" stroke-dasharray="6 6" pointer-events="all" style="fill: light-dark(rgb(232, 244, 253), rgb(20, 31, 38)); stroke: light-dark(rgb(67, 141, 213), rgb(70, 134, 196));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-118"><g transform="translate(0.5,0.5)"><rect x="1630" y="430" width="140" height="20" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 440px; margin-left: 1632px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Контейнер (граница)</div></div></div></foreignObject><text x="1632" y="443" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="10px">Контейнер (граница)</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-119"><g transform="translate(0.5,0.5)"><rect x="1590" y="460" width="30" height="20" rx="3" ry="3" fill="#85bbf0" stroke="#5d8ac2" pointer-events="all" style="fill: light-dark(rgb(133, 187, 240), rgb(42, 89, 134)); stroke: light-dark(rgb(93, 138, 194), rgb(89, 128, 176));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-120"><g transform="translate(0.5,0.5)"><rect x="1630" y="460" width="140" height="20" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 470px; margin-left: 1632px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Компонент</div></div></div></foreignObject><text x="1632" y="473" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="10px">Компонент</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-121"><g transform="translate(0.5,0.5)"><rect x="1590" y="490" width="30" height="20" rx="3" ry="3" fill="#6ba3d6" stroke="#3a7bbd" pointer-events="all" style="fill: light-dark(rgb(107, 163, 214), rgb(63, 111, 155)); stroke: light-dark(rgb(58, 123, 189), rgb(91, 147, 203));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-122"><g transform="translate(0.5,0.5)"><rect x="1630" y="490" width="140" height="20" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 500px; margin-left: 1632px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Главный компонент</div></div></div></foreignObject><text x="1632" y="503" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="10px">Главный компонент</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-123"><g transform="translate(0.5,0.5)"><rect x="1590" y="520" width="30" height="20" rx="3" ry="3" fill="#999999" stroke="#666666" pointer-events="all" style="fill: light-dark(rgb(153, 153, 153), rgb(106, 106, 106)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-124"><g transform="translate(0.5,0.5)"><rect x="1630" y="520" width="140" height="20" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 530px; margin-left: 1632px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Внешняя система</div></div></div></foreignObject><text x="1632" y="533" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="10px">Внешняя система</text></switch></g></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-125"><g transform="translate(0.5,0.5)"><path d="M 1590 555 L 1611.76 555" fill="none" stroke="#1168bd" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(17, 104, 189), rgb(94, 169, 242));"/><path d="M 1617.76 555 L 1609.76 559 L 1611.76 555 L 1609.76 551 Z" fill="#1168bd" stroke="#1168bd" stroke-width="2" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(17, 104, 189), rgb(94, 169, 242)); stroke: light-dark(rgb(17, 104, 189), rgb(94, 169, 242));"/></g></g><g data-cell-id="q6_uw2fDuNxOSaYql00m-126"><g transform="translate(0.5,0.5)"><rect x="1630" y="545" width="140" height="20" fill="none" stroke="none" pointer-events="all"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 138px; height: 1px; padding-top: 555px; margin-left: 1632px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; color: #000000; "><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Внутренний вызов</div></div></div></foreignObject><text x="1632" y="558" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="10px">Внутренний вызов</text></switch></g></g></g></g></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>